{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import'./download.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Download(){const[fileUrl,setFileUrl]=useState('');const[fileName,setFileName]=useState('download.pdf');const navigate=useNavigate();useEffect(()=>{const storedUrl=localStorage.getItem('selectedFile');const storedName=localStorage.getItem('selectedFileName');if(storedUrl){setFileUrl(storedUrl);setFileName(storedName||'download.pdf');}else{setFileUrl('');setFileName('');}},[]);const handleDownload=()=>{const link=document.createElement('a');link.href=fileUrl;link.download=fileName;document.body.appendChild(link);link.click();document.body.removeChild(link);// Simpan metadata file download ke localStorage\nlet size=null;const uploadedFile=localStorage.getItem('uploadedFile');if(uploadedFile){try{const parsed=JSON.parse(uploadedFile);const found=Array.isArray(parsed)?parsed.find(f=>f.name===fileName):parsed.name===fileName?parsed:null;if(found&&found.size)size=found.size;}catch(_unused){}}const userName=localStorage.getItem('userName')||'default';const key=\"downloadedFiles_\".concat(userName);const downloadedFiles=JSON.parse(localStorage.getItem(key)||'[]');downloadedFiles.push({name:fileName,date:new Date().toISOString(),size:size});localStorage.setItem(key,JSON.stringify(downloadedFiles));const API_URL=process.env.REACT_APP_API_URL;fetch(\"\".concat(API_URL,\"/api/files/upload\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({fileName,userName:localStorage.getItem('userName')||null,size:size})});};const handleHomeClick=()=>{navigate('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"download-update-root\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"full-width-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"download-update-logo\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"download-update-logo-bold\",children:\"PDF\"}),\" Kita\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"download-update-slogan\",children:[\"Menyelesaikan Pekerjaan\",/*#__PURE__*/_jsx(\"br\",{}),\"Anda Dengan Mudah\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"download-update-home\",onClick:handleHomeClick,children:\"HOME\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"download-update-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"download-update-title\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Download Your File\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"download-update-desc\",children:\"Terimakasih mudah simpel dan praktis\"}),fileUrl?/*#__PURE__*/_jsx(\"button\",{className:\"download-update-btn\",onClick:handleDownload,children:\"DOWNLOAD HERE\"}):/*#__PURE__*/_jsx(\"p\",{children:\"Tidak ada file untuk diunduh.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"download-update-footer\",children:\"Create By @kelompok_1\"})]});}export default Download;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Download","fileUrl","setFileUrl","fileName","setFileName","navigate","storedUrl","localStorage","getItem","storedName","handleDownload","link","document","createElement","href","download","body","appendChild","click","removeChild","size","uploadedFile","parsed","JSON","parse","found","Array","isArray","find","f","name","_unused","userName","key","concat","downloadedFiles","push","date","Date","toISOString","setItem","stringify","API_URL","process","env","REACT_APP_API_URL","fetch","method","headers","handleHomeClick","className","children","onClick"],"sources":["D:/TRQ/Pdf-Kita-main/frontend/src/download.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './download.css';\r\n\r\nfunction Download() {\r\n  const [fileUrl, setFileUrl] = useState('');\r\n  const [fileName, setFileName] = useState('download.pdf');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const storedUrl = localStorage.getItem('selectedFile');\r\n    const storedName = localStorage.getItem('selectedFileName');\r\n    if (storedUrl) {\r\n      setFileUrl(storedUrl);\r\n      setFileName(storedName || 'download.pdf');\r\n    } else {\r\n      setFileUrl('');\r\n      setFileName('');\r\n    }\r\n  }, []);\r\n\r\n  const handleDownload = () => {\r\n    const link = document.createElement('a');\r\n    link.href = fileUrl;\r\n    link.download = fileName;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n\r\n    // Simpan metadata file download ke localStorage\r\n    let size = null;\r\n    const uploadedFile = localStorage.getItem('uploadedFile');\r\n    if (uploadedFile) {\r\n      try {\r\n        const parsed = JSON.parse(uploadedFile);\r\n        const found = Array.isArray(parsed)\r\n          ? parsed.find(f => f.name === fileName)\r\n          : (parsed.name === fileName ? parsed : null);\r\n        if (found && found.size) size = found.size;\r\n      } catch {}\r\n    }\r\n\r\n    const userName = localStorage.getItem('userName') || 'default';\r\n    const key = `downloadedFiles_${userName}`;\r\n    const downloadedFiles = JSON.parse(localStorage.getItem(key) || '[]');\r\n    downloadedFiles.push({\r\n      name: fileName,\r\n      date: new Date().toISOString(),\r\n      size: size,\r\n    });\r\n    localStorage.setItem(key, JSON.stringify(downloadedFiles));\r\n\r\n    const API_URL = process.env.REACT_APP_API_URL;\r\n    fetch(`${API_URL}/api/files/upload`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        fileName,\r\n        userName: localStorage.getItem('userName') || null,\r\n        size: size,\r\n      }),\r\n    });\r\n  };\r\n\r\n  const handleHomeClick = () => {\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <div className=\"download-update-root\">\r\n      {/* Header Merah */}\r\n      <div className=\"full-width-header\">\r\n        <div className=\"download-update-logo\">\r\n          <span className=\"download-update-logo-bold\">PDF</span> Kita\r\n        </div>\r\n        <div className=\"download-update-slogan\">\r\n          Menyelesaikan Pekerjaan<br />Anda Dengan Mudah\r\n        </div>\r\n        <button className=\"download-update-home\" onClick={handleHomeClick}>HOME</button>\r\n      </div>\r\n\r\n      {/* Konten Tengah */}\r\n      <div className=\"download-update-content\">\r\n        <div className=\"download-update-title\">\r\n          <strong>Download Your File</strong>\r\n        </div>\r\n        <div className=\"download-update-desc\">\r\n          Terimakasih mudah simpel dan praktis\r\n        </div>\r\n        {fileUrl ? (\r\n          <button className=\"download-update-btn\" onClick={handleDownload}>\r\n            DOWNLOAD HERE\r\n          </button>\r\n        ) : (\r\n          <p>Tidak ada file untuk diunduh.</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      <div className=\"download-update-footer\">\r\n        Create By @kelompok_1\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Download;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}