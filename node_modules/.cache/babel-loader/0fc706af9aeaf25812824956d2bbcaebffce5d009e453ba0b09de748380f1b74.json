{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import{useNavigate}from'react-router-dom';// ← Tambahkan baris ini\nimport'./halaman.css';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL;function Halaman(){const[isLoggedIn,setIsLoggedIn]=useState(false);const[isLoading,setIsLoading]=useState(false);const[uploadedFiles,setUploadedFiles]=useState([]);const[notif,setNotif]=useState('');const[isLoadingJpg,setIsLoadingJpg]=useState(false);// Tambahkan state baru\nconst fileInputRef=useRef(null);const navigate=useNavigate();useEffect(()=>{const token=localStorage.getItem('userToken');setIsLoggedIn(!!token);// Reset guestConvertCount jika login\nif(token){localStorage.removeItem('guestConvertCount');}const uploadedFile=localStorage.getItem('uploadedFile');if(uploadedFile){try{const parsed=JSON.parse(uploadedFile);setUploadedFiles(Array.isArray(parsed)?parsed:[parsed]);}catch(_unused){setUploadedFiles([]);}}},[]);const handleDelete=fileName=>{fetch(\"http://localhost:5000/api/files/\".concat(encodeURIComponent(fileName)),{method:'DELETE'}).then(response=>{if(!response.ok)throw new Error('Gagal menghapus file di database');const updatedFiles=uploadedFiles.filter(file=>file.name!==fileName);setUploadedFiles(updatedFiles);localStorage.setItem('uploadedFile',JSON.stringify(updatedFiles));}).catch(error=>{console.error('Terjadi kesalahan:',error);alert('Gagal menghapus file di database.');});};const handleAddFile=()=>{if(fileInputRef.current){fileInputRef.current.value='';fileInputRef.current.click();}};const handleFileChange=event=>{const file=event.target.files[0];if(file){const allowedExtensions=['doc','docx','xls','xlsx','jpg','jpeg'];const fileExtension=file.name.split('.').pop().toLowerCase();if(allowedExtensions.includes(fileExtension)){setNotif('Mohon tunggu sebentar, file sedang ter-upload...');const formData=new FormData();formData.append('file',file);fetch(\"\".concat(API_URL,\"/api/files/upload\"),{method:'POST',body:formData}).then(response=>{if(!response.ok)throw new Error('Gagal upload file ke server');return response.json();}).then(data=>{const newFile={name:data.originalname,size:file.size,type:file.type,path:\"/uploads/\".concat(data.filename),uploadedBy:1};const updatedFiles=[...uploadedFiles,newFile];setUploadedFiles(updatedFiles);localStorage.setItem('uploadedFile',JSON.stringify(updatedFiles));setNotif('Sukses di-upload!');setTimeout(()=>setNotif(''),1500);}).catch(error=>{console.error('Terjadi kesalahan:',error);setNotif('Gagal upload file ke server.');setTimeout(()=>setNotif(''),2000);});}else{setNotif('Hanya file Word, Excel, dan JPG yang dapat diunggah.');setTimeout(()=>setNotif(''),2000);}}};// Tambahkan fungsi pengecekan guest limit\nconst checkGuestLimit=()=>{if(!isLoggedIn){const count=Number(localStorage.getItem('guestConvertCount')||0);if(count>=1){setNotif('maaf login dulu bro');return false;}localStorage.setItem('guestConvertCount',count+1);}return true;};const handleConvertWordToPdf=async()=>{if(!checkGuestLimit())return;if(!uploadedFiles.length)return alert('Pilih file dulu!');const fileMeta=uploadedFiles[0];const allowedExtensions=['doc','docx'];const fileExtension=fileMeta.name.split('.').pop().toLowerCase();if(!allowedExtensions.includes(fileExtension)){return alert('Pilih file Word (.doc/.docx) untuk dikonversi ke PDF!');}try{setIsLoading(true);const response=await fetch('http://localhost:5000/api/convert/word-to-pdf',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({fileName:fileMeta.name})});if(!response.ok){const errorText=await response.text();throw new Error(\"Server error: \".concat(errorText));}const data=await response.json();localStorage.setItem('selectedFile',data.fileUrl);localStorage.setItem('selectedFileName',fileMeta.name.replace(/\\.[^/.]+$/,'')+'.pdf');navigate('/download');}catch(error){console.error('Konversi gagal:',error);alert('Konversi gagal: '+error.message);}finally{setIsLoading(false);}};const handleConvertExcelToPdf=async()=>{if(!checkGuestLimit())return;if(!uploadedFiles.length)return alert('Pilih file dulu!');const fileMeta=uploadedFiles[0];const allowedExtensions=['xls','xlsx'];const fileExtension=fileMeta.name.split('.').pop().toLowerCase();if(!allowedExtensions.includes(fileExtension)){return alert('Pilih file Excel (.xls/.xlsx) untuk dikonversi ke PDF!');}try{setIsLoading(true);const response=await fetch('http://localhost:5000/api/convert/excel-to-pdf',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({fileName:fileMeta.name})});if(!response.ok){const errorText=await response.text();throw new Error(\"Server error: \".concat(errorText));}const data=await response.json();localStorage.setItem('selectedFile',data.fileUrl);localStorage.setItem('selectedFileName',fileMeta.name.replace(/\\.[^/.]+$/,'')+'.pdf');navigate('/download');}catch(error){console.error('Konversi gagal:',error);alert('Konversi gagal: '+error.message);}finally{setIsLoading(false);}};const handleConvertJpgToPdf=async()=>{if(!checkGuestLimit())return;if(!uploadedFiles.length)return alert('Pilih file dulu!');const fileMeta=uploadedFiles[0];const allowedExtensions=['jpg','jpeg'];const fileExtension=fileMeta.name.split('.').pop().toLowerCase();if(!allowedExtensions.includes(fileExtension)){return alert('Pilih file JPG untuk dikonversi ke PDF!');}try{// Tambahkan delay 0.5 detik sebelum setIsLoadingJpg(true)\nawait new Promise(resolve=>setTimeout(resolve,500));setIsLoadingJpg(true);const response=await fetch('http://localhost:5000/api/convert/jpg-to-pdf',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({fileName:fileMeta.name})});if(!response.ok){const errorText=await response.text();throw new Error(\"Server error: \".concat(errorText));}const data=await response.json();localStorage.setItem('selectedFile',data.fileUrl);localStorage.setItem('selectedFileName',fileMeta.name.replace(/\\.[^/.]+$/,'')+'.pdf');navigate('/download');}catch(error){console.error('Konversi gagal:',error);alert('Konversi gagal: '+error.message);}finally{setIsLoadingJpg(false);// Reset loading JPG\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:0,left:0,width:'100%',zIndex:20},children:/*#__PURE__*/_jsx(\"button\",{className:\"back-button\",onClick:()=>navigate('/'),children:\"\\u2190 Back to Home\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"halaman-content\",children:[notif&&/*#__PURE__*/_jsx(\"div\",{style:{background:'#fffae6',color:'#e67e22',padding:'10px 20px',borderRadius:'8px',marginBottom:'16px',fontWeight:'bold',border:'1px solid #ffe0b2'},children:notif}),/*#__PURE__*/_jsx(\"h2\",{className:\"halaman-title\",children:\"Choose Your File\"}),/*#__PURE__*/_jsx(\"p\",{className:\"halaman-subtitle\",children:\"Pilih File converter kamu!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"convert-button\",onClick:handleConvertWordToPdf,disabled:isLoading||isLoadingJpg,children:\"Word To PDF\"}),/*#__PURE__*/_jsx(\"button\",{className:\"convert-button\",onClick:handleConvertExcelToPdf,disabled:isLoading||isLoadingJpg,children:\"Excel To PDF\"}),/*#__PURE__*/_jsx(\"button\",{className:\"convert-button\",onClick:handleConvertJpgToPdf,disabled:isLoadingJpg||isLoading,children:isLoadingJpg?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"loading-spinner\",style:{marginRight:8}}),\"Tunggu sebentar...\"]}):'JPG To PDF'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"uploaded-files\",children:uploadedFiles.length>0&&uploadedFiles.map((file,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"uploaded-file\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"uploaded-file-name\",children:file.name}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:()=>handleDelete(file.name),children:\"Delete\"})]},index))}),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",children:\"Loading\"}),isLoggedIn&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"upload-btn\",onClick:handleAddFile,children:\"Tambahkan File\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".doc,.docx,.xls,.xlsx,.jpg,.jpeg\",ref:fileInputRef,style:{display:'none'},onChange:handleFileChange})]})]})]});}export default Halaman;","map":{"version":3,"names":["React","useEffect","useState","useRef","useNavigate","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","Halaman","isLoggedIn","setIsLoggedIn","isLoading","setIsLoading","uploadedFiles","setUploadedFiles","notif","setNotif","isLoadingJpg","setIsLoadingJpg","fileInputRef","navigate","token","localStorage","getItem","removeItem","uploadedFile","parsed","JSON","parse","Array","isArray","_unused","handleDelete","fileName","fetch","concat","encodeURIComponent","method","then","response","ok","Error","updatedFiles","filter","file","name","setItem","stringify","catch","error","console","alert","handleAddFile","current","value","click","handleFileChange","event","target","files","allowedExtensions","fileExtension","split","pop","toLowerCase","includes","formData","FormData","append","body","json","data","newFile","originalname","size","type","path","filename","uploadedBy","setTimeout","checkGuestLimit","count","Number","handleConvertWordToPdf","length","fileMeta","headers","errorText","text","fileUrl","replace","message","handleConvertExcelToPdf","handleConvertJpgToPdf","Promise","resolve","className","children","style","position","top","left","width","zIndex","onClick","background","color","padding","borderRadius","marginBottom","fontWeight","border","disabled","marginRight","map","index","accept","ref","display","onChange"],"sources":["D:/TRQ/Pdf-Kita-main/frontend/src/halaman.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom'; // ← Tambahkan baris ini\r\nimport './halaman.css';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL;\r\n\r\nfunction Halaman() {\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [uploadedFiles, setUploadedFiles] = useState([]);\r\n  const [notif, setNotif] = useState('');\r\n  const [isLoadingJpg, setIsLoadingJpg] = useState(false); // Tambahkan state baru\r\n  const fileInputRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('userToken');\r\n    setIsLoggedIn(!!token);\r\n\r\n    // Reset guestConvertCount jika login\r\n    if (token) {\r\n      localStorage.removeItem('guestConvertCount');\r\n    }\r\n\r\n    const uploadedFile = localStorage.getItem('uploadedFile');\r\n    if (uploadedFile) {\r\n      try {\r\n        const parsed = JSON.parse(uploadedFile);\r\n        setUploadedFiles(Array.isArray(parsed) ? parsed : [parsed]);\r\n      } catch {\r\n        setUploadedFiles([]);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const handleDelete = (fileName) => {\r\n    fetch(`http://localhost:5000/api/files/${encodeURIComponent(fileName)}`, {\r\n      method: 'DELETE',\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) throw new Error('Gagal menghapus file di database');\r\n        const updatedFiles = uploadedFiles.filter((file) => file.name !== fileName);\r\n        setUploadedFiles(updatedFiles);\r\n        localStorage.setItem('uploadedFile', JSON.stringify(updatedFiles));\r\n      })\r\n      .catch((error) => {\r\n        console.error('Terjadi kesalahan:', error);\r\n        alert('Gagal menghapus file di database.');\r\n      });\r\n  };\r\n\r\n  const handleAddFile = () => {\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n      fileInputRef.current.click();\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      const allowedExtensions = ['doc', 'docx', 'xls', 'xlsx', 'jpg', 'jpeg'];\r\n      const fileExtension = file.name.split('.').pop().toLowerCase();\r\n\r\n      if (allowedExtensions.includes(fileExtension)) {\r\n        setNotif('Mohon tunggu sebentar, file sedang ter-upload...');\r\n        const formData = new FormData();\r\n        formData.append('file', file);\r\n\r\n        fetch(`${API_URL}/api/files/upload`, {\r\n          method: 'POST',\r\n          body: formData,\r\n        })\r\n          .then((response) => {\r\n            if (!response.ok) throw new Error('Gagal upload file ke server');\r\n            return response.json();\r\n          })\r\n          .then((data) => {\r\n            const newFile = {\r\n              name: data.originalname,\r\n              size: file.size,\r\n              type: file.type,\r\n              path: `/uploads/${data.filename}`,\r\n              uploadedBy: 1,\r\n            };\r\n            const updatedFiles = [...uploadedFiles, newFile];\r\n            setUploadedFiles(updatedFiles);\r\n            localStorage.setItem('uploadedFile', JSON.stringify(updatedFiles));\r\n            setNotif('Sukses di-upload!');\r\n            setTimeout(() => setNotif(''), 1500);\r\n          })\r\n          .catch((error) => {\r\n            console.error('Terjadi kesalahan:', error);\r\n            setNotif('Gagal upload file ke server.');\r\n            setTimeout(() => setNotif(''), 2000);\r\n          });\r\n      } else {\r\n        setNotif('Hanya file Word, Excel, dan JPG yang dapat diunggah.');\r\n        setTimeout(() => setNotif(''), 2000);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Tambahkan fungsi pengecekan guest limit\r\n  const checkGuestLimit = () => {\r\n    if (!isLoggedIn) {\r\n      const count = Number(localStorage.getItem('guestConvertCount') || 0);\r\n      if (count >= 1) {\r\n        setNotif('maaf login dulu bro');\r\n        return false;\r\n      }\r\n      localStorage.setItem('guestConvertCount', count + 1);\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const handleConvertWordToPdf = async () => {\r\n    if (!checkGuestLimit()) return;\r\n\r\n    if (!uploadedFiles.length) return alert('Pilih file dulu!');\r\n    const fileMeta = uploadedFiles[0];\r\n    const allowedExtensions = ['doc', 'docx'];\r\n    const fileExtension = fileMeta.name.split('.').pop().toLowerCase();\r\n    if (!allowedExtensions.includes(fileExtension)) {\r\n      return alert('Pilih file Word (.doc/.docx) untuk dikonversi ke PDF!');\r\n    }\r\n\r\n    try {\r\n      setIsLoading(true);\r\n      const response = await fetch('http://localhost:5000/api/convert/word-to-pdf', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ fileName: fileMeta.name }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(`Server error: ${errorText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      localStorage.setItem('selectedFile', data.fileUrl);\r\n      localStorage.setItem('selectedFileName', fileMeta.name.replace(/\\.[^/.]+$/, '') + '.pdf');\r\n      navigate('/download');\r\n    } catch (error) {\r\n      console.error('Konversi gagal:', error);\r\n      alert('Konversi gagal: ' + error.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleConvertExcelToPdf = async () => {\r\n    if (!checkGuestLimit()) return;\r\n\r\n    if (!uploadedFiles.length) return alert('Pilih file dulu!');\r\n    const fileMeta = uploadedFiles[0];\r\n    const allowedExtensions = ['xls', 'xlsx'];\r\n    const fileExtension = fileMeta.name.split('.').pop().toLowerCase();\r\n    if (!allowedExtensions.includes(fileExtension)) {\r\n      return alert('Pilih file Excel (.xls/.xlsx) untuk dikonversi ke PDF!');\r\n    }\r\n\r\n    try {\r\n      setIsLoading(true);\r\n      const response = await fetch('http://localhost:5000/api/convert/excel-to-pdf', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ fileName: fileMeta.name }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(`Server error: ${errorText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      localStorage.setItem('selectedFile', data.fileUrl);\r\n      localStorage.setItem('selectedFileName', fileMeta.name.replace(/\\.[^/.]+$/, '') + '.pdf');\r\n      navigate('/download');\r\n    } catch (error) {\r\n      console.error('Konversi gagal:', error);\r\n      alert('Konversi gagal: ' + error.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleConvertJpgToPdf = async () => {\r\n    if (!checkGuestLimit()) return;\r\n\r\n    if (!uploadedFiles.length) return alert('Pilih file dulu!');\r\n    const fileMeta = uploadedFiles[0];\r\n    const allowedExtensions = ['jpg', 'jpeg'];\r\n    const fileExtension = fileMeta.name.split('.').pop().toLowerCase();\r\n    if (!allowedExtensions.includes(fileExtension)) {\r\n      return alert('Pilih file JPG untuk dikonversi ke PDF!');\r\n    }\r\n\r\n    try {\r\n      // Tambahkan delay 0.5 detik sebelum setIsLoadingJpg(true)\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n      setIsLoadingJpg(true);\r\n\r\n      const response = await fetch('http://localhost:5000/api/convert/jpg-to-pdf', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ fileName: fileMeta.name }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(`Server error: ${errorText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      localStorage.setItem('selectedFile', data.fileUrl);\r\n      localStorage.setItem('selectedFileName', fileMeta.name.replace(/\\.[^/.]+$/, '') + '.pdf');\r\n      navigate('/download');\r\n    } catch (error) {\r\n      console.error('Konversi gagal:', error);\r\n      alert('Konversi gagal: ' + error.message);\r\n    } finally {\r\n      setIsLoadingJpg(false); // Reset loading JPG\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      {/* Header kiri atas */}\r\n      <div style={{ position: 'absolute', top: 0, left: 0, width: '100%', zIndex: 20 }}>\r\n        <button className=\"back-button\" onClick={() => navigate('/')}>← Back to Home</button>\r\n      </div>\r\n\r\n      <div className=\"halaman-content\">\r\n        {/* Notifikasi upload */}\r\n        {notif && (\r\n          <div style={{\r\n            background: '#fffae6',\r\n            color: '#e67e22',\r\n            padding: '10px 20px',\r\n            borderRadius: '8px',\r\n            marginBottom: '16px',\r\n            fontWeight: 'bold',\r\n            border: '1px solid #ffe0b2'\r\n          }}>\r\n            {notif}\r\n          </div>\r\n        )}\r\n        <h2 className=\"halaman-title\">Choose Your File</h2>\r\n        <p className=\"halaman-subtitle\">Pilih File converter kamu!</p>\r\n\r\n        <div className=\"button-container\">\r\n          <button className=\"convert-button\" onClick={handleConvertWordToPdf} disabled={isLoading || isLoadingJpg}>Word To PDF</button>\r\n          <button className=\"convert-button\" onClick={handleConvertExcelToPdf} disabled={isLoading || isLoadingJpg}>Excel To PDF</button>\r\n          <button\r\n            className=\"convert-button\"\r\n            onClick={handleConvertJpgToPdf}\r\n            disabled={isLoadingJpg || isLoading}\r\n          >\r\n            {isLoadingJpg ? (\r\n              <>\r\n                <span className=\"loading-spinner\" style={{ marginRight: 8 }} />\r\n                Tunggu sebentar...\r\n              </>\r\n            ) : (\r\n              'JPG To PDF'\r\n            )}\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"uploaded-files\">\r\n          {uploadedFiles.length > 0 && uploadedFiles.map((file, index) => (\r\n            <div key={index} className=\"uploaded-file\">\r\n              <span className=\"uploaded-file-name\">{file.name}</span>\r\n              <button className=\"delete-btn\" onClick={() => handleDelete(file.name)}>Delete</button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {isLoading && <div className=\"loading-spinner\">Loading</div>}\r\n\r\n        {isLoggedIn && (\r\n          <>\r\n            <button className=\"upload-btn\" onClick={handleAddFile}>Tambahkan File</button>\r\n            <input\r\n              type=\"file\"\r\n              accept=\".doc,.docx,.xls,.xlsx,.jpg,.jpeg\"\r\n              ref={fileInputRef}\r\n              style={{ display: 'none' }}\r\n              onChange={handleFileChange}\r\n            />\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Halaman;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}