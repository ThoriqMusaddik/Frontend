{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import'./notlogin.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Halaman(){const[uploadedFiles,setUploadedFiles]=useState([]);// Daftar file yang diunggah\nconst fileInputRef=useRef(null);// Referensi untuk input file\nuseEffect(()=>{// Ambil file yang diunggah dari localStorage\nconst uploadedFile=localStorage.getItem('uploadedFile');if(uploadedFile){try{const parsed=JSON.parse(uploadedFile);setUploadedFiles(Array.isArray(parsed)?parsed:[parsed]);}catch(_unused){setUploadedFiles([]);}}},[]);// Fungsi untuk membuka dialog upload file\nconst handleAddFile=()=>{if(fileInputRef.current){fileInputRef.current.value='';// reset input supaya bisa upload file yang sama berulang\nfileInputRef.current.click();}};// Fungsi untuk menangani perubahan file input (upload file)\nconst handleFileChange=event=>{const file=event.target.files[0];if(file){const allowedExtensions=['pdf'];const fileExtension=file.name.split('.').pop().toLowerCase();if(!allowedExtensions.includes(fileExtension)){alert('Hanya file PDF yang dapat diunggah.');return;}// Upload file ke server\nconst formData=new FormData();formData.append('file',file);fetch('http://localhost:5000/api/files/upload',{method:'POST',body:formData}).then(response=>{if(!response.ok)throw new Error('Gagal upload file ke server');return response.json();}).then(data=>{// data.filename diasumsikan nama file hasil upload di server\nconst newFile={name:data.originalname,size:file.size,type:file.type,path:\"/uploads/\".concat(data.filename),uploadedBy:1};const updatedFiles=[...uploadedFiles,newFile];setUploadedFiles(updatedFiles);localStorage.setItem('uploadedFile',JSON.stringify(updatedFiles));alert('File berhasil diupload!');}).catch(error=>{console.error('Terjadi kesalahan:',error);alert('Gagal upload file ke server.');});}};// Fungsi untuk menghapus file yang sudah diupload\nconst handleDelete=fileName=>{fetch(\"http://localhost:5000/api/files/\".concat(encodeURIComponent(fileName)),{method:'DELETE'}).then(response=>{if(!response.ok)throw new Error('Gagal menghapus file di database');const updatedFiles=uploadedFiles.filter(file=>file.name!==fileName);setUploadedFiles(updatedFiles);localStorage.setItem('uploadedFile',JSON.stringify(updatedFiles));}).catch(error=>{console.error('Terjadi kesalahan:',error);alert('Gagal menghapus file di database.');});};return/*#__PURE__*/_jsx(\"div\",{className:\"halaman-root\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"halaman-content\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"halaman-title\",children:\"Choose Your File\"}),/*#__PURE__*/_jsx(\"p\",{className:\"halaman-subtitle\",children:\"Pilih File converter kamu!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"convert-button\",children:\"PDF To Word\"}),/*#__PURE__*/_jsx(\"button\",{className:\"convert-button\",children:\"PDF To Excel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"convert-button\",children:\"PDF To JPG\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddFile,style:{marginTop:'20px'},children:\"Upload File PDF\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,onChange:handleFileChange,style:{display:'none'},accept:\".pdf\"}),/*#__PURE__*/_jsx(\"ul\",{children:uploadedFiles.map(file=>/*#__PURE__*/_jsxs(\"li\",{children:[file.name,' ',/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(file.name),children:\"Delete\"})]},file.name))})]})});}export default Halaman;","map":{"version":3,"names":["React","useEffect","useState","useRef","jsx","_jsx","jsxs","_jsxs","Halaman","uploadedFiles","setUploadedFiles","fileInputRef","uploadedFile","localStorage","getItem","parsed","JSON","parse","Array","isArray","_unused","handleAddFile","current","value","click","handleFileChange","event","file","target","files","allowedExtensions","fileExtension","name","split","pop","toLowerCase","includes","alert","formData","FormData","append","fetch","method","body","then","response","ok","Error","json","data","newFile","originalname","size","type","path","concat","filename","uploadedBy","updatedFiles","setItem","stringify","catch","error","console","handleDelete","fileName","encodeURIComponent","filter","className","children","onClick","style","marginTop","ref","onChange","display","accept","map"],"sources":["D:/TRQ/Pdf-Kita-main/frontend/src/notlogin.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport './notlogin.css';\n\nfunction Halaman() {\n  const [uploadedFiles, setUploadedFiles] = useState([]); // Daftar file yang diunggah\n  const fileInputRef = useRef(null); // Referensi untuk input file\n\n  useEffect(() => {\n    // Ambil file yang diunggah dari localStorage\n    const uploadedFile = localStorage.getItem('uploadedFile');\n    if (uploadedFile) {\n      try {\n        const parsed = JSON.parse(uploadedFile);\n        setUploadedFiles(Array.isArray(parsed) ? parsed : [parsed]);\n      } catch {\n        setUploadedFiles([]);\n      }\n    }\n  }, []);\n\n  // Fungsi untuk membuka dialog upload file\n  const handleAddFile = () => {\n    if (fileInputRef.current) {\n      fileInputRef.current.value = ''; // reset input supaya bisa upload file yang sama berulang\n      fileInputRef.current.click();\n    }\n  };\n\n  // Fungsi untuk menangani perubahan file input (upload file)\n  const handleFileChange = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      const allowedExtensions = ['pdf'];\n      const fileExtension = file.name.split('.').pop().toLowerCase();\n\n      if (!allowedExtensions.includes(fileExtension)) {\n        alert('Hanya file PDF yang dapat diunggah.');\n        return;\n      }\n\n      // Upload file ke server\n      const formData = new FormData();\n      formData.append('file', file);\n\n      fetch('http://localhost:5000/api/files/upload', {\n        method: 'POST',\n        body: formData,\n      })\n        .then((response) => {\n          if (!response.ok) throw new Error('Gagal upload file ke server');\n          return response.json();\n        })\n        .then((data) => {\n          // data.filename diasumsikan nama file hasil upload di server\n          const newFile = {\n            name: data.originalname,\n            size: file.size,\n            type: file.type,\n            path: `/uploads/${data.filename}`,\n            uploadedBy: 1,\n          };\n          const updatedFiles = [...uploadedFiles, newFile];\n          setUploadedFiles(updatedFiles);\n          localStorage.setItem('uploadedFile', JSON.stringify(updatedFiles));\n          alert('File berhasil diupload!');\n        })\n        .catch((error) => {\n          console.error('Terjadi kesalahan:', error);\n          alert('Gagal upload file ke server.');\n        });\n    }\n  };\n\n  // Fungsi untuk menghapus file yang sudah diupload\n  const handleDelete = (fileName) => {\n    fetch(`http://localhost:5000/api/files/${encodeURIComponent(fileName)}`, {\n      method: 'DELETE',\n    })\n      .then((response) => {\n        if (!response.ok) throw new Error('Gagal menghapus file di database');\n        const updatedFiles = uploadedFiles.filter((file) => file.name !== fileName);\n        setUploadedFiles(updatedFiles);\n        localStorage.setItem('uploadedFile', JSON.stringify(updatedFiles));\n      })\n      .catch((error) => {\n        console.error('Terjadi kesalahan:', error);\n        alert('Gagal menghapus file di database.');\n      });\n  };\n\n  return (\n    <div className=\"halaman-root\">\n      <div className=\"halaman-content\">\n        <h2 className=\"halaman-title\">Choose Your File</h2>\n        <p className=\"halaman-subtitle\">Pilih File converter kamu!</p>\n\n        <div className=\"button-container\">\n          <button className=\"convert-button\">PDF To Word</button>\n          <button className=\"convert-button\">PDF To Excel</button>\n          <button className=\"convert-button\">PDF To JPG</button>\n        </div>\n\n        {/* Tombol Upload File */}\n        <button onClick={handleAddFile} style={{ marginTop: '20px' }}>\n          Upload File PDF\n        </button>\n\n        {/* Input file tersembunyi */}\n        <input\n          type=\"file\"\n          ref={fileInputRef}\n          onChange={handleFileChange}\n          style={{ display: 'none' }}\n          accept=\".pdf\"\n        />\n\n        {/* Tampilkan list file yang sudah diupload */}\n        <ul>\n          {uploadedFiles.map((file) => (\n            <li key={file.name}>\n              {file.name}{' '}\n              <button onClick={() => handleDelete(file.name)}>Delete</button>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nexport default Halaman;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}